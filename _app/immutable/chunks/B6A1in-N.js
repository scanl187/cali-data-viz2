import{t as j,a as B}from"./D0olhUvi.js";import"./1fWIjdlx.js";import{a8 as I,a9 as G,aa as L,ac as X,c as q,ad as S,v as A,f as s,a3 as J,r as K}from"./Dxt62XMo.js";import{b as Q}from"./NLylHng5.js";import{i as U}from"./BjSHy-Xe.js";import{p as $}from"./C_8fVN5o.js";import{o as V}from"./Bd8YvDJK.js";import"./nHqQ5mnR.js";import{s as f}from"./CB6J5KXz.js";import{t as Z,a as M}from"./B2ifyFvu.js";import{l as tt}from"./DLZV-4rG.js";import{o as et}from"./CzTs3WvC.js";import{e as rt}from"./Ccx1MofX.js";import{m as at}from"./DBeXZoyG.js";import{c as ot}from"./C4zzdlvu.js";import{r as st}from"./BpUo07YV.js";import{s as E}from"./DFJOuHom.js";import{T as nt}from"./BFJ9hVLE.js";import{a as it,b as lt}from"./rlX7cRMw.js";import{l as pt}from"./XshjUOsZ.js";var mt=j('<div style="display: flex; flex-direction: column; align-items: center; max-width: 1200px; margin: auto;"><div style="width: 100%;"></div></div>');function Mt(k,_){I(_,!1);let F=$(_,"csvPath",8,"/fire_climate_data.csv"),b=$(_,"currentProgress",8,0),Y=A(),d,l=[],c=A([]),g,p,h,u,x,v=A(),w=A(0);const n={top:60,right:150,bottom:60,left:80},y=800,O=270,P=y-n.left-n.right,R=O-n.top-n.bottom;V(async()=>{l=await ot(F(),e=>{const t=+e.YEAR,a=+e.MONTH,r=new Date(t,a-1,1);return{YEAR:t,MONTH:a,fire_count:+e.fire_count,SEASON:e.SEASON,date:r}}),l.sort((e,t)=>e.date-t.date);const o=st(l,e=>({total:f(e,t=>t.fire_count),Winter:f(e.filter(t=>t.SEASON==="Winter"),t=>t.fire_count),Spring:f(e.filter(t=>t.SEASON==="Spring"),t=>t.fire_count),Summer:f(e.filter(t=>t.SEASON==="Summer"),t=>t.fire_count),Fall:f(e.filter(t=>t.SEASON==="Fall"),t=>t.fire_count)}),e=>e.YEAR);S(c,Array.from(o,([e,t])=>({YEAR:+e,...t})).sort((e,t)=>e.YEAR-t.YEAR)),T()});function T(){g=E(s(Y)).append("svg").attr("width",y).attr("height",O),g.append("text").attr("x",(y-n.right)/2).attr("y",n.top/2).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text("Monthly Fire Count with Season-Based Color "),p=g.append("g").attr("transform",`translate(${n.left},${n.top})`),h=Z().range([0,P]),u=tt().range([R,0]),x=et().range(nt),p.append("g").attr("class","x-axis").attr("transform",`translate(0, ${R})`),p.append("g").attr("class","y-axis"),d=E("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none").style("background","#222").style("color","#fff").style("padding","8px 12px").style("border-radius","6px").style("font-size","14px"),C()}function C(){if(l.length===0)return;h.domain(rt(l,t=>t.date)),u.domain([0,at(l,t=>t.fire_count)]).nice();const o=Array.from(new Set(l.map(t=>t.SEASON)));x.domain(o),p.select(".x-axis").call(it(h).tickFormat(M("%Y"))),p.select(".y-axis").call(lt(u));const e=g.append("g").attr("transform",`translate(${y-n.right+20}, ${n.top})`);o.forEach((t,a)=>{const r=e.append("g").attr("transform",`translate(0, ${a*25})`);r.append("rect").attr("width",18).attr("height",18).attr("fill",x(t)),r.append("text").attr("x",25).attr("y",14).style("font-size","14px").text(t)})}function z(o){const e=l.filter(a=>a.date<=o);p.selectAll(".line-group").remove();const t=p.append("g").attr("class","line-group");for(let a=1;a<e.length;a++){const r=e[a-1],H=e[a];t.append("path").attr("fill","none").attr("stroke",x(r.SEASON)).attr("stroke-width",2).attr("d",pt().x(i=>h(i.date)).y(i=>u(i.fire_count))([r,H])).on("mouseover",function(){E(this).attr("stroke-width",3);const i=s(c).find(m=>m.YEAR===r.YEAR),W=l.filter(m=>m.YEAR===r.YEAR&&m.SEASON===r.SEASON).map(m=>`${M("%b")(m.date)}: ${m.fire_count}`).join("<br>");d.html(`
              <strong>Year:</strong> ${r.YEAR}<br>
              <strong>Season:</strong> ${r.SEASON}<br>
              <strong>Total Fires:</strong> ${(i==null?void 0:i[r.SEASON])??"N/A"}<br><br>
              ${W}
            `).style("opacity",1)}).on("mousemove",function(i){d.style("left",`${i.pageX+15}px`).style("top",`${i.pageY-30}px`)}).on("mouseout",function(){E(this).attr("stroke-width",2),d.style("opacity",0)})}}G(()=>(s(c),J(b()),s(w),s(v)),()=>{if(s(c).length>0&&b()>=12){const o=s(c).length,e=b()-12,a=Math.floor(e/88*o);S(w,Math.max(0,a));const r=s(c)[Math.min(s(w),o-1)].YEAR;S(v,new Date(r,11,31)),z(s(v))}}),L(),U();var N=mt(),D=q(N);Q(D,o=>S(Y,o),()=>s(Y)),K(N),B(k,N),X()}export{Mt as S};
