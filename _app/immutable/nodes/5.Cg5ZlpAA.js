import{t as W,a as T}from"../chunks/D0olhUvi.js";import"../chunks/1fWIjdlx.js";import{a8 as tt,a9 as et,aa as at,f as t,ac as rt,c as d,s as h,v as z,ad as A,ae as G,r as f,ab as st}from"../chunks/Dxt62XMo.js";import{B as ot}from"../chunks/B7Lq80dp.js";import{s as N,e as it}from"../chunks/ufU7u_KI.js";import{i as nt}from"../chunks/DaYBm5bb.js";import{r as H,s as J,a as lt}from"../chunks/BxuMG8tz.js";import{a as pt}from"../chunks/CNuWzhWm.js";import{b as ct}from"../chunks/NLylHng5.js";import{i as dt}from"../chunks/BjSHy-Xe.js";import{o as ft}from"../chunks/Bd8YvDJK.js";import"../chunks/nHqQ5mnR.js";import{a as mt}from"../chunks/sENntlTP.js";import{b as yt}from"../chunks/tK10Cjh8.js";import{m as K}from"../chunks/DBeXZoyG.js";import{l as xt,a as ut}from"../chunks/DLZV-4rG.js";import{q as R}from"../chunks/BSa_lxCJ.js";import{m as vt}from"../chunks/D1slsF82.js";import{c as gt}from"../chunks/C6hWhumo.js";import{s as Y}from"../chunks/DFJOuHom.js";import{a as ht,b as bt}from"../chunks/rlX7cRMw.js";var _t=W('<div class="slider-container svelte-cemeau"><label class="slider-label svelte-cemeau">Select Year: <span class="year-display svelte-cemeau"> </span></label> <input type="range" class="slider svelte-cemeau" step="1"> <div style="display: flex; justify-content: space-between;"><span> </span> <span> </span></div></div>'),kt=W('<div style="font-family: sans-serif; max-width: 800px;"><div class="toggle-container svelte-cemeau"><label class="toggle-switch svelte-cemeau"><input type="checkbox" class="svelte-cemeau"> <span class="toggle-slider svelte-cemeau"></span></label> <span class="toggle-label svelte-cemeau">Show All Years (2013-2020)</span></div> <!> <div></div></div>');function wt(M,k){tt(k,!1);let s=z(),g=z([]),b=z(2013),_={min:2013,max:2020},m=z(!1);ft(async()=>{try{const o=await(await fetch("./fires_duration_precip.csv")).text();A(g,gt(o,mt)),t(s)&&S()}catch(e){console.error("Error loading data:",e),Y(t(s)).append("div").style("color","red").style("font-family","sans-serif").text("Error loading data: "+e.message)}});function U(e){A(b,parseInt(e.target.value)),S()}function S(){const e={top:50,right:40,bottom:60,left:70},o=800-e.left-e.right,p=500-e.top-e.bottom;Y(t(s)).selectAll("svg").remove(),Y(t(s)).selectAll(".tooltip").remove();const a=Y(t(s)).append("svg").attr("width",o+e.left+e.right).attr("height",p+e.top+e.bottom).append("g").attr("transform",`translate(${e.left},${e.top})`);let w;t(m)?w=t(g):w=t(g).filter(n=>n.Year===t(b));const i=w.filter(n=>n.PrecipBucket&&n.Duration!=null);if(i.length===0){a.append("text").attr("x",o/2).attr("y",p/2).attr("text-anchor","middle").style("font-family","sans-serif").style("font-size","16px").text(t(m)?"No valid data found":`No valid data found for year ${t(b)}`);return}const $=Array.from(new Set(i.map(n=>String(n.PrecipBucket)))).sort(),y=yt().domain($).range([0,o]).padding(.4);a.append("g").attr("transform",`translate(0,${p})`).call(ht(y)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end").style("font-size","12px"),a.append("text").attr("x",o/2).attr("y",p+e.bottom-5).attr("text-anchor","middle").style("font-family","sans-serif").style("font-size","14px").text("Precipitation Bucket");const Q=K(i,n=>n.Duration)*1.1,r=xt().domain([0,Q]).nice().range([p,0]);a.append("g").call(bt(r)).style("font-size","12px"),a.append("text").attr("transform","rotate(-90)").attr("x",-390/2).attr("y",-50).attr("text-anchor","middle").style("font-family","sans-serif").style("font-size","14px").text("Fire Duration (days)"),a.append("text").attr("x",o/2).attr("y",-50/2).attr("text-anchor","middle").style("font-family","sans-serif").style("font-size","18px").style("font-weight","bold").text(t(m)?"Fire Duration by Precipitation Bucket (All Years)":`Fire Duration by Precipitation Bucket (${t(b)})`);const x=Y(t(s)).append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","#fff").style("border","1px solid #ccc").style("border-radius","4px").style("padding","8px").style("pointer-events","none").style("z-index","100");$.forEach(n=>{const u=i.filter(l=>String(l.PrecipBucket)===n).map(l=>l.Duration).sort(ut);if(u.length<1)return;const F=R(u,.25),C=R(u,.5),B=R(u,.75),L=B-F,P=Math.max(vt(u),F-1.5*L),D=Math.min(K(u),B+1.5*L),c=y(n)+y.bandwidth()/2,v=y.bandwidth();a.append("line").attr("x1",c).attr("x2",c).attr("y1",r(P)).attr("y2",r(D)).attr("stroke","black").attr("stroke-width",1),a.append("line").attr("x1",c-v/3).attr("x2",c+v/3).attr("y1",r(P)).attr("y2",r(P)).attr("stroke","black").attr("stroke-width",1),a.append("line").attr("x1",c-v/3).attr("x2",c+v/3).attr("y1",r(D)).attr("y2",r(D)).attr("stroke","black").attr("stroke-width",1),a.append("rect").attr("x",c-v/2).attr("y",r(B)).attr("height",Math.max(1,r(F)-r(B))).attr("width",v).attr("fill","#fa8072").attr("stroke","black").attr("stroke-width",1).on("mouseover",()=>x.style("opacity",.9)).on("mousemove",l=>{x.html(`<strong>${n} Precipitation</strong><br>
              <hr style="margin: 4px 0">
              ${t(m)?`<span style="font-weight: bold">Years:</span> ${_.min}-${_.max}<br>`:""}
              <span style="font-weight: bold">Count:</span> ${u.length} fires<br>
              <span style="font-weight: bold">Q1:</span> ${F.toFixed(1)} days<br>
              <span style="font-weight: bold">Median:</span> ${C.toFixed(1)} days<br>
              <span style="font-weight: bold">Q3:</span> ${B.toFixed(1)} days<br>
              <span style="font-weight: bold">Min:</span> ${P.toFixed(1)} days<br>
              <span style="font-weight: bold">Max:</span> ${D.toFixed(1)} days`).style("left",`${l.pageX+10}px`).style("top",`${l.pageY-10}px`)}).on("mouseout",()=>x.style("opacity",0)),a.append("line").attr("x1",c-v/2).attr("x2",c+v/2).attr("y1",r(C)).attr("y2",r(C)).attr("stroke","black").attr("stroke-width",2),u.filter(l=>l<P||l>D).forEach(l=>{a.append("circle").attr("cx",c).attr("cy",r(l)).attr("r",3).attr("fill","black").attr("stroke","black").attr("stroke-width",1).on("mouseover",()=>x.style("opacity",.9)).on("mousemove",O=>{x.html(`<span style="font-weight: bold">Outlier:</span> ${l.toFixed(1)} days`).style("left",`${O.pageX+10}px`).style("top",`${O.pageY-10}px`)}).on("mouseout",()=>x.style("opacity",0))})}),a.append("text").attr("x",o).attr("y",p+40).attr("text-anchor","end").style("font-family","sans-serif").style("font-size","12px").style("font-style","italic").text(`Total fires: ${i.length}`)}et(()=>(t(g),t(s),t(m)),()=>{t(g).length>0&&t(s)&&t(m)!==void 0&&S()}),at(),dt();var q=kt(),E=d(q),X=d(E),j=d(X);H(j),G(2),f(X),G(2),f(E);var I=h(E,2);{var V=e=>{var o=_t(),p=d(o),a=h(d(p)),w=d(a,!0);f(a),f(p);var i=h(p,2);H(i);var $=h(i,2),y=d($),Q=d(y,!0);f(y);var r=h(y,2),x=d(r,!0);f(r),f($),f(o),st(()=>{N(w,t(b)),J(i,"min",_.min),J(i,"max",_.max),lt(i,t(b)),N(Q,_.min),N(x,_.max)}),it("input",i,U),T(e,o)};nt(I,e=>{t(m)||e(V)})}var Z=h(I,2);ct(Z,e=>A(s,e),()=>t(s)),f(q),pt(j,()=>t(m),e=>A(m,e)),T(M,q),rt()}var $t=W('<div class="container"><!> <h1>California Wildfires - BoxPlot</h1> <!></div>');function Gt(M){var k=$t(),s=d(k);ot(s);var g=h(s,4);wt(g,{}),f(k),T(M,k)}export{Gt as component};
