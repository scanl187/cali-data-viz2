const v=Math.PI,y=2*v,c=1e-6,P=y-c;function T(n){this._+=n[0];for(let t=1,e=n.length;t<e;++t)this._+=arguments[t]+n[t]}function S(n){let t=Math.floor(n);if(!(t>=0))throw new Error(`invalid digits: ${n}`);if(t>15)return T;const e=10**t;return function(i){this._+=i[0];for(let h=1,o=i.length;h<o;++h)this._+=Math.round(arguments[h]*e)/e+i[h]}}class ${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?T:S(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,i,h){this._append`Q${+t},${+e},${this._x1=+i},${this._y1=+h}`}bezierCurveTo(t,e,i,h,o,_){this._append`C${+t},${+e},${+i},${+h},${this._x1=+o},${this._y1=+_}`}arcTo(t,e,i,h,o){if(t=+t,e=+e,i=+i,h=+h,o=+o,o<0)throw new Error(`negative radius: ${o}`);let _=this._x1,u=this._y1,s=i-t,r=h-e,a=_-t,f=u-e,l=a*a+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(l>c)if(!(Math.abs(f*s-r*a)>c)||!o)this._append`L${this._x1=t},${this._y1=e}`;else{let p=i-_,g=h-u,m=s*s+r*r,L=p*p+g*g,w=Math.sqrt(m),b=Math.sqrt(l),x=o*Math.tan((v-Math.acos((m+l-L)/(2*w*b)))/2),M=x/b,E=x/w;Math.abs(M-1)>c&&this._append`L${t+M*a},${e+M*f}`,this._append`A${o},${o},0,0,${+(f*p>a*g)},${this._x1=t+E*s},${this._y1=e+E*r}`}}arc(t,e,i,h,o,_){if(t=+t,e=+e,i=+i,_=!!_,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(h),s=i*Math.sin(h),r=t+u,a=e+s,f=1^_,l=_?h-o:o-h;this._x1===null?this._append`M${r},${a}`:(Math.abs(this._x1-r)>c||Math.abs(this._y1-a)>c)&&this._append`L${r},${a}`,i&&(l<0&&(l=l%y+y),l>P?this._append`A${i},${i},0,1,${f},${t-u},${e-s}A${i},${i},0,1,${f},${this._x1=r},${this._y1=a}`:l>c&&this._append`A${i},${i},0,${+(l>=v)},${f},${this._x1=t+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(t,e,i,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${i=+i}v${+h}h${-i}Z`}toString(){return this._}}function k(){return new $}k.prototype=$.prototype;function j(n=3){return new $(+n)}function d(n){return function(){return n}}function q(n){let t=3;return n.digits=function(e){if(!arguments.length)return t;if(e==null)t=null;else{const i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);t=i}return n},()=>new $(t)}var z=Array.prototype.slice;function C(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function A(n){this._context=n}A.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){switch(n=+n,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;default:this._context.lineTo(n,t);break}}};function R(n){return new A(n)}function N(n){return n[0]}function Z(n){return n[1]}function I(n,t){var e=d(!0),i=null,h=R,o=null,_=q(u);n=typeof n=="function"?n:n===void 0?N:d(n),t=typeof t=="function"?t:t===void 0?Z:d(t);function u(s){var r,a=(s=C(s)).length,f,l=!1,p;for(i==null&&(o=h(p=_())),r=0;r<=a;++r)!(r<a&&e(f=s[r],r,s))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+n(f,r,s),+t(f,r,s));if(p)return o=null,p+""||null}return u.x=function(s){return arguments.length?(n=typeof s=="function"?s:d(+s),u):n},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:d(+s),u):t},u.defined=function(s){return arguments.length?(e=typeof s=="function"?s:d(!!s),u):e},u.curve=function(s){return arguments.length?(h=s,i!=null&&(o=h(i)),u):h},u.context=function(s){return arguments.length?(s==null?i=o=null:o=h(i=s),u):i},u}export{$ as P,C as a,R as b,d as c,j as d,I as l,k as p,z as s,q as w,N as x,Z as y};
