import{n as f,A as g,a as tn,s as Z,t as en,g as _,b as A,i as on}from"./B9H2ajqG.js";function rn(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);if(!(n.status===204||n.status===205))return n.json()}function Sn(n,t){return fetch(n,t).then(rn)}var P=new g,b=new g,B,G,k,L,d={point:f,lineStart:f,lineEnd:f,polygonStart:function(){d.lineStart=an,d.lineEnd=sn},polygonEnd:function(){d.lineStart=d.lineEnd=d.point=f,P.add(tn(b)),b=new g},result:function(){var n=P/2;return P=new g,n}};function an(){d.point=un}function un(n,t){d.point=H,B=k=n,G=L=t}function H(n,t){b.add(L*n-k*t),k=n,L=t}function sn(){H(B,G)}var M=0,j=0,S=0,w=0,v=0,p=0,x=0,F=0,m=0,I,K,c,l,s={point:h,lineStart:X,lineEnd:Y,polygonStart:function(){s.lineStart=dn,s.lineEnd=fn},polygonEnd:function(){s.point=h,s.lineStart=X,s.lineEnd=Y},result:function(){var n=m?[x/m,F/m]:p?[w/p,v/p]:S?[M/S,j/S]:[NaN,NaN];return M=j=S=w=v=p=x=F=m=0,n}};function h(n,t){M+=n,j+=t,++S}function X(){s.point=cn}function cn(n,t){s.point=ln,h(c=n,l=t)}function ln(n,t){var r=n-c,o=t-l,e=Z(r*r+o*o);w+=e*(c+n)/2,v+=e*(l+t)/2,p+=e,h(c=n,l=t)}function Y(){s.point=h}function dn(){s.point=hn}function fn(){O(I,K)}function hn(n,t){s.point=O,h(I=c=n,K=l=t)}function O(n,t){var r=n-c,o=t-l,e=Z(r*r+o*o);w+=e*(c+n)/2,v+=e*(l+t)/2,p+=e,e=l*n-c*t,x+=e*(c+n),F+=e*(l+t),m+=e*3,h(c=n,l=t)}function Q(n){this._context=n}Q.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break}case 1:{this._context.lineTo(n,t);break}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,en);break}}},result:f};var T=new g,y,U,V,$,E,R={point:f,lineStart:function(){R.point=pn},lineEnd:function(){y&&W(U,V),R.point=f},polygonStart:function(){y=!0},polygonEnd:function(){y=null},result:function(){var n=+T;return T=new g,n}};function pn(n,t){R.point=W,U=$=n,V=E=t}function W(n,t){$-=n,E-=t,T.add(Z($*$+E*E)),$=n,E=t}let C,N,q,D;class J{constructor(t){this._append=t==null?nn:gn(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,r){switch(this._point){case 0:{this._append`M${t},${r}`,this._point=1;break}case 1:{this._append`L${t},${r}`;break}default:{if(this._append`M${t},${r}`,this._radius!==q||this._append!==N){const o=this._radius,e=this._;this._="",this._append`m0,${o}a${o},${o} 0 1,1 0,${-2*o}a${o},${o} 0 1,1 0,${2*o}z`,q=o,N=this._append,D=this._,this._=e}this._+=D;break}}}result(){const t=this._;return this._="",t.length?t:null}}function nn(n){let t=1;this._+=n[0];for(const r=n.length;t<r;++t)this._+=arguments[t]+n[t]}function gn(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return nn;if(t!==C){const r=10**t;C=t,N=function(e){let u=1;this._+=e[0];for(const a=e.length;u<a;++u)this._+=Math.round(arguments[u]*r)/r+e[u]}}return N}function mn(n,t){let r=3,o=4.5,e,u;function a(i){return i&&(typeof o=="function"&&u.pointRadius(+o.apply(this,arguments)),_(i,e(u))),u.result()}return a.area=function(i){return _(i,e(d)),d.result()},a.measure=function(i){return _(i,e(R)),R.result()},a.bounds=function(i){return _(i,e(A)),A.result()},a.centroid=function(i){return _(i,e(s)),s.result()},a.projection=function(i){return arguments.length?(e=i==null?(n=null,on):(n=i).stream,a):n},a.context=function(i){return arguments.length?(u=i==null?(t=null,new J(r)):new Q(t=i),typeof o!="function"&&u.pointRadius(o),a):t},a.pointRadius=function(i){return arguments.length?(o=typeof i=="function"?i:(u.pointRadius(+i),+i),a):o},a.digits=function(i){if(!arguments.length)return r;if(i==null)r=null;else{const z=Math.floor(i);if(!(z>=0))throw new RangeError(`invalid digits: ${i}`);r=z}return t===null&&(u=new J(r)),a},a.projection(n).digits(r).context(t)}export{mn as i,Sn as j};
