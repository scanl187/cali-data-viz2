import{t as Q,a as N}from"./D0olhUvi.js";import"./1fWIjdlx.js";import{a8 as pa,a9 as G,aa as da,a7 as fa,c as w,ac as ua,s as g,ad as C,v as k,f as e,a3 as H,ae as K,r as y,ab as wa}from"./Dxt62XMo.js";import{s as ga}from"./ufU7u_KI.js";import{i as ya}from"./DaYBm5bb.js";import{r as W}from"./BxuMG8tz.js";import{c as X}from"./CNuWzhWm.js";import{b as ha}from"./NLylHng5.js";import{i as va}from"./BjSHy-Xe.js";import{p as J}from"./C_8fVN5o.js";import{o as xa}from"./Bd8YvDJK.js";import{c as ba}from"./nHqQ5mnR.js";import{a as _a}from"./sENntlTP.js";import{m as V}from"./DBeXZoyG.js";import{s as Ma}from"./uWTSG2Kf.js";import{r as Z}from"./OtVwhkKS.js";import{l as Sa}from"./DLZV-4rG.js";import{s as $a}from"./CB6J5KXz.js";import{c as Aa}from"./C4zzdlvu.js";import{s as j}from"./DFJOuHom.js";import{r as Ca}from"./BpUo07YV.js";import{R as ka}from"./CvtXWHAS.js";import{c as Ha}from"./rlX7cRMw.js";var Ba=Q('<div class="year-label svelte-17079sr"><strong>Year:</strong> </div>'),La=Q('<div style="text-align:center; margin-bottom: 0.5rem;"><label><input type="radio"> Count</label> <label style="margin-left: 1rem;"><input type="radio"> Acres</label></div> <!> <svg></svg>',1);function eo(U,h){pa(h,!1);const s=k(),B=[];let i=J(h,"progress",8,0),r=J(h,"metric",12,"acres"),m=k(),d,p=k([]);const v=[1992,2020],L=400,aa=475;function oa(a){const o=ba(a);return o?(o.r*299+o.g*587+o.b*114)/1e3>128?"#000":"#fff":"#000"}const ta=[{name:"Del Norte",col:3,row:0},{name:"Siskiyou",col:4,row:0},{name:"Modoc",col:5,row:0},{name:"Humboldt",col:3,row:1},{name:"Trinity",col:4,row:1},{name:"Shasta",col:5,row:1},{name:"Lassen",col:6,row:1},{name:"Mendocino",col:3,row:2},{name:"Tehama",col:4,row:2},{name:"Plumas",col:5,row:2},{name:"Nevada",col:6,row:2},{name:"Lake",col:3,row:3},{name:"Glenn",col:4,row:3},{name:"Butte",col:5,row:3},{name:"Sierra",col:6,row:3},{name:"Sonoma",col:3,row:4},{name:"Colusa",col:4,row:4},{name:"Yuba",col:5,row:4},{name:"El Dorado",col:6,row:4},{name:"Napa",col:3,row:5},{name:"Sutter",col:4,row:5},{name:"Placer",col:5,row:5},{name:"Sacramento",col:6,row:5},{name:"Solano",col:3,row:6},{name:"Yolo",col:4,row:6},{name:"Amador",col:5,row:6},{name:"Alpine",col:6,row:6},{name:"Marin",col:2,row:6},{name:"San Francisco",col:2,row:7},{name:"Contra Costa",col:3,row:7},{name:"San Joaquin",col:4,row:7},{name:"Calaveras",col:5,row:7},{name:"Tuolumne",col:6,row:7},{name:"Alameda",col:2,row:8},{name:"Stanislaus",col:3,row:8},{name:"Mono",col:7,row:8},{name:"Merced",col:4,row:8},{name:"Mariposa",col:5,row:8},{name:"San Mateo",col:2,row:9},{name:"Santa Clara",col:3,row:9},{name:"Madera",col:4,row:9},{name:"Fresno",col:5,row:9},{name:"Inyo",col:6,row:9},{name:"Santa Cruz",col:2,row:10},{name:"San Benito",col:3,row:10},{name:"Monterey",col:4,row:10},{name:"Kings",col:5,row:10},{name:"Tulare",col:6,row:10},{name:"San Luis Obispo",col:3,row:11},{name:"Kern",col:5,row:11},{name:"San Bernardino",col:6,row:11},{name:"Santa Barbara",col:3,row:12},{name:"Ventura",col:4,row:12},{name:"Los Angeles",col:5,row:12},{name:"Orange",col:6,row:12},{name:"San Diego",col:5,row:13},{name:"Riverside",col:6,row:13},{name:"Imperial",col:6,row:14}],x=20,R=Math.sqrt(3)*x,ea=2*x*.75;xa(async()=>{const a=await Aa("./fire_points_updated.csv",_a);C(p,a.filter(o=>o.latitude&&o.longitude&&o.county)),V(e(p),o=>r()==="acres"?o.acres:1),d=j("body").append("div").attr("class","hex-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none").style("background","#222").style("color","#fff").style("padding","8px 12px").style("border-radius","6px").style("font-size","14px").style("z-index",9999)});function ra(a){const o=Math.PI/3;return Z(6).map(n=>[a*Math.cos(o*n),a*Math.sin(o*n)]).reduce((n,[l,c],M)=>n+(M===0?`M${l},${c}`:`L${l},${c}`),"")+"Z"}function na(){const a=j(e(m)).attr("width",L).attr("height",aa);a.selectAll("*").remove();const o=e(p).filter(t=>t.year===e(s)),n=Ca(o,t=>r()==="acres"?$a(t,$=>$.acres):t.length,t=>t.county),l=V(Array.from(n.values())),c=Ma(ka).domain([0,l||1]),M=ra(x);ta.forEach(({name:t,col:$,row:F})=>{const I=$*R+(F%2===0?0:R/2)+60,O=F*ea+20,A=n.get(t)||0;a.append("path").attr("d",M).attr("transform",`translate(${I},${O})`).attr("fill",c(A)).attr("stroke","#fff").attr("stroke-width",.8).on("mouseover",function(){d.html(`<strong>${t}</strong><br>${r()==="acres"?"Acres Burned":"Fire Count"}: ${Math.round(A)}`).style("opacity",1)}).on("mousemove",function(q){d.style("left",`${q.pageX+15}px`).style("top",`${q.pageY-30}px`)}).on("mouseout",function(){d.style("opacity",0)}),a.append("text").attr("x",I).attr("y",O+4).text(t).attr("text-anchor","middle").attr("font-size",8).attr("fill",oa(c(A)))});const Y=150,D=12,E="legend-gradient",S=L-90,ca=a.append("defs").append("linearGradient").attr("id",E).attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");Z(0,1.01,.1).forEach(t=>{ca.append("stop").attr("offset",`${t*100}%`).attr("stop-color",c(t*l))}),a.append("rect").attr("x",S).attr("y",20).attr("width",D).attr("height",Y).style("fill",`url(#${E})`);const ia=Sa().domain([0,l]).range([Y,0]),ma=Ha(ia).ticks(5);a.append("g").attr("transform",`translate(${S+D+8}, 20)`).call(ma),a.append("text").attr("x",S-10).attr("y",14).attr("text-anchor","start").attr("font-size","12px").attr("fill","#333").text(r()==="acres"?"Acres burned":"Fire count")}G(()=>H(i()),()=>{C(s,i()>=12?v[0]+Math.round((i()-12)/88*(v[1]-v[0])):void 0)}),G(()=>(e(m),e(p),H(i()),e(s),H(r())),()=>{e(m)&&e(p).length&&i()>=12&&e(s)!==void 0&&r()&&na()}),da(),va();var T=La(),b=fa(T),_=w(b),f=w(_);W(f),f.value=(f.__value="count")==null?"":"count",K(),y(_);var z=g(_,2),u=w(z);W(u),u.value=(u.__value="acres")==null?"":"acres",K(),y(z),y(b);var P=g(b,2);{var sa=a=>{var o=Ba(),n=g(w(o));y(o),wa(()=>ga(n,` ${e(s)??""}`)),N(a,o)};ya(P,a=>{e(s)&&a(sa)})}var la=g(P,2);ha(la,a=>C(m,a),()=>e(m)),X(B,[],f,r,r),X(B,[],u,r,r),N(U,T),ua()}export{eo as H};
