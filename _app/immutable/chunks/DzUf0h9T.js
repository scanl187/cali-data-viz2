import{t as F,a as L,b as G}from"./D0olhUvi.js";import"./1fWIjdlx.js";import{a8 as z,a7 as P,ab as V,f as d,ac as j,s as p,ad as I,v as W,ae as M,c as O,r as k}from"./Dxt62XMo.js";import{h as Z,e as h,s as H}from"./ufU7u_KI.js";import{r as $}from"./BxuMG8tz.js";import{b as q}from"./CNuWzhWm.js";import{i as Q}from"./BjSHy-Xe.js";import{o as U}from"./Bd8YvDJK.js";import{g as K}from"./B0DqdaSQ.js";var X=G('<link href="https://cesium.com/downloads/cesiumjs/releases/1.128/Build/Cesium/Widgets/widgets.css" rel="stylesheet"> <script src="https://cesium.com/downloads/cesiumjs/releases/1.128/Build/Cesium/Cesium.js" defer><\/script>',1),ee=F('<div class="top-controls svelte-13pktc2"><button>‚Üê Back</button> <button>Fly Me to California</button> <label><strong>Year:</strong> <input type="range" min="2000" max="2020" step="1" class="svelte-13pktc2"></label></div> <div id="cesiumContainer" class="svelte-13pktc2"></div>',1);function fe(B,Y){z(Y,!1);let i,m=[],u=W(2005);function x(){history.length>1?history.back():K("/")}function R(e){const[o,...t]=e.trim().split(`
`),s=o.split(",");return t.map(l=>{const a=l.split(","),n={};return s.forEach((r,f)=>{var c;n[r.trim()]=(c=a[f])==null?void 0:c.trim()}),n.latitude=+n.latitude,n.longitude=+n.longitude,n.acres=+n.acres,n.year=+n.year,n})}function N(e){i.__fireScalingListener&&i.scene.postRender.removeEventListener(i.__fireScalingListener);const o=e.JulianDate.now();i.__fireScalingListener=function(){const t=i.camera.positionCartographic.height,s=e.JulianDate.now(),l=e.JulianDate.secondsDifference(s,o);let a;t<5e4?a=10:t<1e5?a=5:t<2e5?a=2.5:t<5e5?a=1:a=.5;for(let n=0;n<i.entities.values.length;n++){const r=i.entities.values[n];if(r.billboard&&r.billboard.image){const f=r.originalSize||10,c=r.bounceOffset||0,E=1+Math.sin((l+c)*2*Math.PI*2)*.15,T=f*a*E;r.billboard.width=T,r.billboard.height=T}}},i.scene.postRender.addEventListener(i.__fireScalingListener)}async function b(e,o){i.entities.removeAll(),m.filter(t=>t.year===o&&typeof t.latitude=="number"&&typeof t.longitude=="number").forEach(t=>{const s=Math.min(100,Math.max(10,t.acres/100)),l=i.entities.add({name:`Fire ${t.fire_name}`,position:e.Cartesian3.fromDegrees(t.longitude,t.latitude),billboard:{image:"./open-fire-11190_256.gif",width:s,height:s,verticalOrigin:e.VerticalOrigin.BOTTOM},description:`
          <b>Name:</b> ${t.fire_name}<br/>
          <b>Acres:</b> ${t.acres}<br/>
          <b>County:</b> ${t.county}<br/>
          <b>Year:</b> ${t.year}
        `});l.originalSize=s,l.bounceOffset=Math.random()*5}),N(e)}async function A(e){const o=e.Rectangle.fromDegrees(-124.48,32.53,-114.13,42.01),t=e.BoundingSphere.fromRectangle3D(o);i.camera.flyToBoundingSphere(t,{offset:new e.HeadingPitchRange(e.Math.toRadians(0),e.Math.toRadians(-25),3e5),duration:4})}U(async()=>{const e=window.Cesium;if(!e){console.error("Cesium not available");return}e.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2YTZlNTY2Zi1mNGY1LTQ2Y2EtYTA1ZS0xZmFhZjYwZGI5NDYiLCJpZCI6Mjk0MDQxLCJpYXQiOjE3NDQ2NTA0MzR9.noUc-GDwJGe5SCmqKtr4P0UnGgnu2f3bx9ww6DolHzY",i=new e.Viewer("cesiumContainer",{animation:!1,timeline:!1,homeButton:!1,sceneModePicker:!1,baseLayerPicker:!1,geocoder:!1,navigationHelpButton:!1,fullscreenButton:!1,infoBox:!0,selectionIndicator:!1,terrain:e.Terrain.fromWorldTerrain({requestWaterMask:!1,requestVertexNormals:!1})}),i.camera.setView({destination:e.Cartesian3.fromDegrees(-93.23256,44.97452,500),orientation:{heading:e.Math.toRadians(0),pitch:e.Math.toRadians(-90),roll:0}});const o=await e.createOsmBuildingsAsync();i.scene.primitives.add(o);const t=await e.GeoJsonDataSource.load("./california-counties.geojson");t.entities.values.forEach(a=>{a.polygon.material=e.Color.YELLOW.withAlpha(.1),a.polygon.outline=!0,a.polygon.outlineColor=e.Color.YELLOW,a.polygon.outlineWidth=1;const r=a.polygon.hierarchy.getValue(e.JulianDate.now()).positions;if(r&&r.length){const f=e.BoundingSphere.fromPoints(r).center,c=e.Cartographic.fromCartesian(f),D=e.Cartesian3.fromRadians(c.longitude,c.latitude,0);a.position=D,a.label=new e.LabelGraphics({text:a.properties.name,font:"14px sans-serif",fillColor:e.Color.BLACK,style:e.LabelStyle.FILL,verticalOrigin:e.VerticalOrigin.BOTTOM,heightReference:e.HeightReference.CLAMP_TO_GROUND,disableDepthTestDistance:Number.POSITIVE_INFINITY,scale:.8,showBackground:!0,backgroundColor:e.Color.WHITE.withAlpha(.7),distanceDisplayCondition:new e.DistanceDisplayCondition(0,1e7),scaleByDistance:new e.NearFarScalar(500,1.2,1e6,.1)})}}),i.dataSources.add(t);const l=await(await fetch("./fire_points_updated.csv")).text();m=R(l),[...new Set(m.map(a=>+a.year))].sort(),b(e,d(u))});function J(e){I(u,+e.target.value);const o=window.Cesium;b(o,d(u))}Q();var v=ee();Z(e=>{var o=X();M(2),L(e,o)});var w=P(v),y=O(w),C=p(y,2),_=p(C,2),S=p(O(_)),g=p(S);$(g),k(_),k(w),M(2),V(()=>H(S,` ${d(u)??""} `)),h("click",y,x),h("click",C,()=>A(window.Cesium)),q(g,()=>d(u),e=>I(u,e)),h("input",g,J),L(B,v),j()}export{fe as T};
